<nav [ngClass]="{ collapsed }">
    <div class="top-nav">
        <button class="collapse-btn" (click)="toggleCollapsed()"><i class="far fa-bars"></i></button>

        <div class="brand">
            <img class="brand__logo" src="/assets/logo.svg" alt="Logo">
            <span class="brand__name">PolyTinder</span>
        </div>
    
        <ul class="main-nav">
            <li *ngFor="let item of (navigation | async)" class="nav-item">
                <a [routerLink]="isActiveLink(item.href) ? undefined : item.href" class="nav-item__link" [ngClass]="{'nav-item__link--active': isActiveLink(item.href), 'nav-item__link---not-active': !isActiveLink(item.href), 'interactable--small': !isActiveLink(item.href)}">
                    <i [class]="'fa-' + item.icon + ' fas nav-item__link__icon'"></i>
                    <span class="nav-item__link__content">{{item.text}}</span>
                    <span class="nav-item__link__pill" *ngIf="item.href === '/matches' && (unreadConversationCount | async) != '0'">{{ unreadConversationCount | async }}</span>
                    <span class="nav-item__link__pill nav-item__link__pill--error" *ngIf="item.href === '/profile' && !(userValid | async)">1</span>
                </a>
            </li>
        </ul>
    </div>


    <div class="bottom-nav">
        <ul>
            <!-- <li class="nav-item interactable" matTooltip="Préférences" *ngIf="isLoggedIn | async">
                <a routerLink="/settings" class="nav-item__link"><i class="fas fa-cog"></i></a>
            </li> -->
            <li class="nav-item interactable" matTooltip="À propos" *ngIf="isLoggedIn | async">
                <a routerLink="/about" class="nav-item__link"><i class="fas fa-info-circle"></i></a>
            </li>
            <li class="nav-item interactable" matTooltip="Github" *ngIf="isLoggedIn | async">
                <a href="https://github.com/PolyTinder/poly-tinder" target="_blank" class="nav-item__link"><i class="fab fa-github"></i></a>
            </li>
        </ul>

        <ul>
            <li class="nav-item interactable" matTooltip="Se déconnecter" *ngIf="isLoggedIn | async">
                <a class="nav-item__link" [matMenuTriggerFor]="logoutMenu"><i class="fas fa-sign-out"></i></a>

                <mat-menu #logoutMenu="matMenu">
                    <button (click)="logout()" mat-menu-item><i class="fas fa-sign-out"></i> Se déconnecter</button>
                </mat-menu>
            </li>
        </ul>
    </div>
</nav>